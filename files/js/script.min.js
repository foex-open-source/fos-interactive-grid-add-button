

var FOS=window.FOS||{};FOS.interactiveGrid=FOS.interactiveGrid||{},FOS.interactiveGrid.addButton=function(e,t,o){apex.debug.info("FOS - Interactive Grid - Add Button",t,o),o instanceof Function&&o.call(e,t);var n,a,i=e.affectedElements[0].id,r="#"+i,c=apex.region(i);if(!c||"InteractiveGrid"!=c.type)throw new Error("The specified element is not an Interactive Grid");var l,d=c.call("getActions"),s=t.addToToolbar,u=t.toolbarGroupId,g=t.addToMenu,f=t.menuId,p=t.addAtIndex,m=t.label,b=t.icon,v=t.isHot,h=t.primaryKeyItem,w=t.conditionColumn,y=t.eventName,x=t.callback,O=t.disableOnNoSelection,C=t.disableOnNoData,S=t.iconOnly,T=t.iconRightAligned,A=t.actionName||"fos-ig-button-"+setTimeout((function(){})),I={type:"action",name:A,label:m,icon:b,iconType:"fa"};if(g&&["row-actions","selection-actions"].indexOf(f)>-1?(a=c.call("getViews","grid"),n=a.model,"row-actions"==f?I.action=function(e,t){var o=a.getContextRecord(t)[0];h&&apex.item(h).setValue(n.getRecordId(o));var i={event:e,focusElement:t,region:c,model:n,actionsContext:d,record:o};y&&apex.event.trigger(r,y,i),x&&x.call({data:i})}:"selection-actions"==f&&(I.action=function(e,t){var o=c.call("getSelectedRecords"),a={event:e,focusElement:t,region:c,model:n,actionsContext:d,selectedRecords:o};if(h){var i=o.map((function(e){var t=n.getRecordId(e);try{var o=JSON.parse(t);return Array.isArray(o)?o:t}catch(e){return t}}));apex.item(h).setValue(JSON.stringify(i))}y&&apex.event.trigger(r,y,a),x&&x.call({data:a})})):y?I.action=function(e,t){n=c.call("getCurrentView").model,apex.event.trigger(r,y,{event:e,focusElement:t,region:c,model:n,actionsContext:d})}:x&&(I.action=function(e,t){n=c.call("getCurrentView").model,x.call({data:{event:e,focusElement:t,region:c,model:n,actionsContext:d}})}),d.lookup(A)||d.add(I),g){var G,R,V;"row-actions"==f?R=(G=a.rowActionMenu$).menu("option","items"):"selection-actions"==f?R=(G=a.selActionMenu$).menu("option","items"):"actions"==f&&(R=(V=c.call("getToolbar").toolbar("find","actions_button").menu).items),(p<0||p>R.length)&&(p=R.length);var F=[{type:"action",action:A,label:m,icon:b?"fa "+b:""}];t.addSeparatorBefore&&R[p-1]&&"separator"!=R[p-1].type&&F.unshift({type:"separator"}),t.addSeparatorAfter&&R[p]&&"separator"!=R[p].type&&F.push({type:"separator"}),R=R.slice(0,p).concat(F).concat(R.slice(p)),G?G.menu("option","items",R):V&&(V.items=R,c.call("getToolbar").toolbar("refresh"))}else if(s){var N=c.call("getToolbar"),B=N.toolbar("option","data"),E=N.toolbar("findGroup",u).controls;(p<0||p>E.length)&&(p=E.length),E.splice(p,0,{type:"BUTTON",label:m,action:A,hot:v,iconOnly:S,iconBeforeLabel:!T,icon:b?"fa "+b:""}),N.toolbar("option","data",B)}g&&"row-actions"==f&&w&&a.rowActionMenu$.on("menubeforeopen",(function(e,t){a=c.call("getViews","grid"),n=a.model;var o=a.getContextRecord(a.view$.find(".js-menuButton.is-active"))[0],i=n.getValue(o,w.toUpperCase());i=i&&i.toLowerCase?i.toLowerCase():i,d.show(A),d.enable(A),"hidden"==i?d.hide(A):"disabled"==i&&d.disable(A)})),O&&((l=function(){c.call("getSelectedRecords").length?d.enable(A):d.disable(A)})(),$(r).on("interactivegridselectionchange",l)),C&&(n=c.call("getViews","grid").model,(l=function(){n._data.length?d.enable(A):d.disable(A)})(),n.subscribe({onChange:function(e,t){l()}}))};
//# sourceMappingURL=script.js.map




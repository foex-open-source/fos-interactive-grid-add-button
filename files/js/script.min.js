var FOS=window.FOS||{};FOS.interactiveGrid=FOS.interactiveGrid||{},FOS.interactiveGrid.addButton=function(e,t,o){apex.debug.info("FOS - Interactive Grid - Add Button",t,o),o instanceof Function&&o.call(e,t);var n,i=e.affectedElements[0].id,a="#"+i,r=apex.region(i);if(!r||"InteractiveGrid"!=r.type)throw new Error("The specified element is not an Interactive Grid");var l=r.call("getActions"),c=t.addToToolbar,d=t.toolbarGroupId,s=t.addToMenu,u=t.menuId,g=t.addAtIndex,f=t.label,p=t.icon,b=t.isHot,m=t.primaryKeyItem,v=t.conditionColumn,h=t.eventName,w=t.callback,y=t.disableOnNoSelection,O=t.disableOnNoData,x=t.hideOnNoSelection,S=t.hideOnNoData,C=t.iconOnly,T=t.iconRightAligned,A=t.actionName||"fos-ig-button-"+setTimeout((function(){})),E={type:"action",name:A,label:f,icon:p,iconType:"fa"};if(s&&["row-actions","selection-actions"].indexOf(u)>-1?(n=r.call("getViews","grid"),k=n.model,"row-actions"==u?E.action=function(e,t){var o=n.getContextRecord(t)[0];m&&apex.item(m).setValue(k.getRecordId(o));var i={event:e,focusElement:t,region:r,model:k,actionsContext:l,record:o};h&&apex.event.trigger(a,h,i),w&&w.call({data:i})}:"selection-actions"==u&&(E.action=function(e,t){var o=r.call("getSelectedRecords"),n={event:e,focusElement:t,region:r,model:k,actionsContext:l,selectedRecords:o};if(m){var i=o.map((function(e){var t=k.getRecordId(e);try{var o=JSON.parse(t);return Array.isArray(o)?o:t}catch(e){return t}}));apex.item(m).setValue(JSON.stringify(i))}h&&apex.event.trigger(a,h,n),w&&w.call({data:n})})):h?E.action=function(e,t){k=r.call("getCurrentView").model,apex.event.trigger(a,h,{event:e,focusElement:t,region:r,model:k,actionsContext:l})}:w&&(E.action=function(e,t){k=r.call("getCurrentView").model,w.call({data:{event:e,focusElement:t,region:r,model:k,actionsContext:l}})}),l.lookup(A)||l.add(E),s){var I,N,V;"row-actions"==u?N=(I=n.rowActionMenu$).menu("option","items"):"selection-actions"==u?N=(I=n.selActionMenu$).menu("option","items"):"actions"==u&&(N=(V=r.call("getToolbar").toolbar("find","actions_button").menu).items),(g<0||g>N.length)&&(g=N.length);var G=[{type:"action",action:A,label:f,icon:p?"fa "+p:""}];t.addSeparatorBefore&&N[g-1]&&"separator"!=N[g-1].type&&G.unshift({type:"separator"}),t.addSeparatorAfter&&N[g]&&"separator"!=N[g].type&&G.push({type:"separator"}),N=N.slice(0,g).concat(G).concat(N.slice(g)),I?I.menu("option","items",N):V&&(V.items=N,r.call("getToolbar").toolbar("refresh"))}else if(c){var R=r.call("getToolbar"),F=R.toolbar("option","data"),_=R.toolbar("findGroup",d).controls;(g<0||g>_.length)&&(g=_.length),_.splice(g,0,{type:"BUTTON",label:f,action:A,hot:b,iconOnly:C,iconBeforeLabel:!T,icon:p?"fa "+p:""}),R.toolbar("option","data",F),R.toolbar("findElement","column_filter_button").hide(),R.toolbar("findElement","search_field").hide(),R.toolbar("findElement","actions_button").hide(),r.call("instance")._updateToolbarElements()}if(s&&"row-actions"==u&&v&&n.rowActionMenu$.on("menubeforeopen",(function(e,t){n=r.call("getViews","grid"),k=n.model;var o=n.getContextRecord(n.view$.find(".js-menuButton.is-active"))[0],i=k.getValue(o,v.toUpperCase());i=i&&i.toLowerCase?i.toLowerCase():i,l.show(A),l.enable(A),"hidden"==i?l.hide(A):"disabled"==i&&l.disable(A)})),y||x){var B=function(){var e=l.lookup(A),t=r.call("getSelectedRecords").length;y&&(t>0&&e.disabled?l.enable(A):0!=t||e.disabled||l.disable(A)),x&&(t>0&&e.hide?l.show(A):0!=t||e.hide||l.hide(A))};B(),$(a).on("interactivegridselectionchange interactivegridreportchange",B)}if(O||S){var k,M,L=function(){var e=r.call("getViews","grid").model,t=l.lookup(A),o=e._data.length;O&&(o>0&&t.disabled?l.enable(A):0!=o||t.disabled||l.disable(A)),S&&(o>0&&t.hide?l.show(A):0!=o||t.hide||l.hide(A))};function D(){k&&M&&k.unSubscribe(M),k=r.call("getViews","grid").model,M=k.subscribe({onChange:L}),L()}$(a).on("interactivegridreportchange",(function(){D()})),D()}};
//# sourceMappingURL=script.js.map


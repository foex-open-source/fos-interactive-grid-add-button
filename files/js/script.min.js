var FOS=window.FOS||{};FOS.interactiveGrid=FOS.interactiveGrid||{},FOS.interactiveGrid.addButton=function(e,t,o){apex.debug.info("FOS - Interactive Grid - Add Button",t,o),o instanceof Function&&o.call(e,t);var n,i=e.affectedElements[0].id,a="#"+i,r=apex.region(i);if(!r||"InteractiveGrid"!=r.type)throw new Error("The specified element is not an Interactive Grid");var l=r.call("getActions"),c=t.addToToolbar,d=t.toolbarGroupId,s=t.addToMenu,u=t.menuId,g=t.addAtIndex,f=t.label,p=t.icon,b=t.isHot,m=t.primaryKeyItem,v=t.conditionColumn,h=t.eventName,w=t.callback,y=t.disableOnNoSelection,x=t.disableOnNoData,O=t.hideOnNoSelection,S=t.hideOnNoData,C=t.iconOnly,T=t.iconRightAligned,A=t.iconPrefix,E=t.actionName||"fos-ig-button-"+setTimeout((function(){})),I={type:"action",name:E,label:f,icon:p,iconType:A};if(s&&["row-actions","selection-actions"].indexOf(u)>-1?(n=r.call("getViews","grid"),M=n.model,"row-actions"==u?I.action=function(e,t){var o=n.getContextRecord(t)[0];m&&apex.item(m).setValue(M.getRecordId(o));var i={event:e,focusElement:t,region:r,model:M,actionsContext:l,record:o};h&&apex.event.trigger(a,h,i),w&&w.call({data:i})}:"selection-actions"==u&&(I.action=function(e,t){var o=r.call("getSelectedRecords"),n={event:e,focusElement:t,region:r,model:M,actionsContext:l,selectedRecords:o};if(m){var i=o.map((function(e){var t=M.getRecordId(e);try{var o=JSON.parse(t);return Array.isArray(o)?o:t}catch(e){return t}}));apex.item(m).setValue(JSON.stringify(i))}h&&apex.event.trigger(a,h,n),w&&w.call({data:n})})):h?I.action=function(e,t){M=r.call("getCurrentView").model,apex.event.trigger(a,h,{event:e,focusElement:t,region:r,model:M,actionsContext:l})}:w&&(I.action=function(e,t){M=r.call("getCurrentView").model,w.call({data:{event:e,focusElement:t,region:r,model:M,actionsContext:l}})}),l.lookup(E)||l.add(I),s){var N,V,G;"row-actions"==u?V=(N=n.rowActionMenu$).menu("option","items"):"selection-actions"==u?V=(N=n.selActionMenu$).menu("option","items"):"actions"==u&&(V=(G=r.call("getToolbar").toolbar("find","actions_button").menu).items),(g<0||g>V.length)&&(g=V.length);var R=[{type:"action",action:E,label:f,icon:p?"fa "+p:""}];t.addSeparatorBefore&&V[g-1]&&"separator"!=V[g-1].type&&R.unshift({type:"separator"}),t.addSeparatorAfter&&V[g]&&"separator"!=V[g].type&&R.push({type:"separator"}),V=V.slice(0,g).concat(R).concat(V.slice(g)),N?N.menu("option","items",V):G&&(G.items=V,r.call("getToolbar").toolbar("refresh"))}else if(c){var F=r.call("getToolbar"),_=F.toolbar("option","data"),B=F.toolbar("findGroup",d).controls;(g<0||g>B.length)&&(g=B.length),B.splice(g,0,{type:"BUTTON",label:f,action:E,hot:b,iconOnly:C,iconBeforeLabel:!T,icon:p?"fa "+p:""}),F.toolbar("option","data",_),F.toolbar("findElement","column_filter_button").hide(),F.toolbar("findElement","search_field").hide(),F.toolbar("findElement","actions_button").hide(),r.call("instance")._updateToolbarElements()}if(s&&"row-actions"==u&&v&&n.rowActionMenu$.on("menubeforeopen",(function(e,t){n=r.call("getViews","grid"),M=n.model;var o=n.getContextRecord(n.view$.find(".js-menuButton.is-active"))[0],i=M.getValue(o,v.toUpperCase());i=i&&i.toLowerCase?i.toLowerCase():i,l.show(E),l.enable(E),"hidden"==i?l.hide(E):"disabled"==i&&l.disable(E)})),y||O){var k=function(){var e=l.lookup(E),t=r.call("getSelectedRecords").length;y&&(t>0&&e.disabled?l.enable(E):0!=t||e.disabled||l.disable(E)),O&&(t>0&&e.hide?l.show(E):0!=t||e.hide||l.hide(E))};k(),$(a).on("interactivegridselectionchange interactivegridreportchange",k)}if(x||S){var M,L,D=function(){var e=r.call("getViews","grid").model,t=l.lookup(E),o=e._data.length;x&&(o>0&&t.disabled?l.enable(E):0!=o||t.disabled||l.disable(E)),S&&(o>0&&t.hide?l.show(E):0!=o||t.hide||l.hide(E))};function J(){M&&L&&M.unSubscribe(L),M=r.call("getViews","grid").model,L=M.subscribe({onChange:D}),D()}$(a).on("interactivegridreportchange",(function(){J()})),J()}};
//# sourceMappingURL=script.js.map

